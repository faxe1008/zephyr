

// The MAX3510x uses SPI Mode 1 (SCK low, negative edge)
// byte order is big endian (most significant byte transmits first)

#define MAX3510X_OPCODE_TOF_UP			0x00
#define MAX3510X_OPCODE_TOF_DOWN		0x01
#define MAX3510X_OPCODE_TOF_DIFF		0x02
#define MAX3510X_OPCODE_TEMPERATURE		0x03
#define MAX3510X_OPCODE_RESET			0x04
#define MAX3510X_OPCODE_INITIALIZE		0x05
#define MAX3510X_OPCODE_FLASH			0x06
#define MAX3510X_OPCODE_EVTMG1			0x07
#define MAX3510X_OPCODE_EVTMG2			0x08
#define MAX3510X_OPCODE_EVTMG3			0x09
#define MAX3510X_OPCODE_HALT			0x0A
#define MAX3510X_OPCODE_LDO_TIMED		0x0B
#define MAX3510X_OPCODE_LDO_ON			0x0C
#define MAX3510X_OPCODE_LDO_OFF			0x0D
#define MAX3510X_OPCODE_CALIBRATE		0x0E

#define MAX3510X_OPCODE_READ_REG(r)		(0x80|(r))

#define MAX3510X_REG_CALIBRATION_CONTROL					0x42

#define MAX3510X_REG_AVGUPINT					0xD1
#define MAX3510X_REG_AVGUPFRAC					0xD2

#define MAX3510X_REG_AVGDNINT					0xE0
#define MAX3510X_REG_AVGDNFRAC					0xE1

#define MAX3510X_REG_TOF_DIFFINT				0xE2
#define MAX3510X_REG_TOF_DIFFFRAC				0xE3
#define MAX3510X_REG_TOF_CYCLE_COUNT			0xE4
#define MAX3510X_REG_TOF_DIFF_AVGINT			0xE5
#define MAX3510X_REG_TOF_DIFF_AVGFRAC			0xE6

#define MAX3510X_REG_INTERRUPT_STATUS			0xFE

#define MAX3510X_REG_CALIBRATION_CONTROL_INT_EN_SHIFT		9
#define MAX3510X_REG_CALIBRATION_CONTROL_INT_EN_WIDTH		1

#define MAX3510X_REG_CALIBRATION_CONTROL_INT_EN_ENABLED		1
#define MAX3510X_REG_CALIBRATION_CONTROL_INT_EN_DISABLED	0

#define MAX3510X_REG_INTERRUPT_STATUS_TO		(1<<15)		// timeout occured
#define MAX3510X_REG_INTERRUPT_STATUS_AF		(1<<14)		// RTC alarm occured
#define MAX3510X_REG_INTERRUPT_STATUS_TOF		(1<<12)		// time of flight command complete
#define MAX3510X_REG_INTERRUPT_STATUS_TE		(1<<11)		// temperature command complete
#define MAX3510X_REG_INTERRUPT_STATUS_LDO		(1<<10)		// internal LDO stabilized
#define MAX3510X_REG_INTERRUPT_STATUS_TOF_EVTMG	(1<<9)		// event timing TOF complete
#define MAX3510X_REG_INTERRUPT_STATUS_TEMP_EVTMG (1<<8)		// event timing temperature complete
#define MAX3510X_REG_INTERRUPT_STATUS_FLASH		(1<<7)		// flash ready
#define MAX3510X_REG_INTERRUPT_STATUS_CAL		(1<<6)		// calibrate complete
#define MAX3510X_REG_INTERRUPT_STATUS_HALT		(1<<5)		// halt command complete
#define MAX3510X_REG_INTERRUPT_STATUS_CSWI		(1<<4)		// case switch. high on CSW pin.
#define MAX3510X_REG_INTERRUPT_STATUS_INIT		(1<<3)		// initialize complete
#define MAX3510X_REG_INTERRUPT_STATUS_POR		(1<<2)		// power-on-reset

#define MAX3510X_REG_INTERRUPT_STATUS_INVALID		0xFFFF		// state machine in reset
#define MAX3510X_REG_TOF_INVALID 0xFFFF

#define MAX3510X_REG_CONTROL					0xFF


